<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰æ°ÂÄ§Ë¶≥Ë®∫Êñ≠ AIË¶ÅÁ¥Ñ„ÉÜ„Çπ„Éà | KACHIKAN</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', sans-serif;
            background: #f9fafb;
            min-height: 100vh;
            padding: 40px 20px;
            color: #374151;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 32px;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
        }

        .header .subtitle {
            font-size: 1.125rem;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .header .description {
            font-size: 1rem;
            color: #9ca3af;
        }

        .card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            border-color: #93c5fd;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .card-icon.blue {
            background: #dbeafe;
        }

        .card-icon svg {
            width: 24px;
            height: 24px;
        }

        .card-icon.blue svg {
            color: #2563eb;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
        }

        .card-title.blue {
            color: #2563eb;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .btn-purple {
            background: #9333ea;
            color: white;
        }

        .btn-purple:hover {
            background: #7e22ce;
        }

        .btn-green {
            background: #16a34a;
            color: white;
        }

        .btn-green:hover {
            background: #15803d;
        }

        .btn-gray {
            background: #6b7280;
            color: white;
        }

        .btn-gray:hover {
            background: #4b5563;
        }

        .btn-generate {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            padding: 14px 28px;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            border-radius: 6px;
        }

        .btn-generate:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        }

        .btn-generate:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .matrix-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .matrix-label {
            width: 160px;
            font-size: 14px;
            color: #374151;
            flex-shrink: 0;
            font-weight: 500;
        }

        .matrix-select {
            flex: 1;
            padding: 10px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            cursor: pointer;
            transition: border-color 0.2s;
            color: #374151;
        }

        .matrix-select:focus {
            outline: none;
            border-color: #2563eb;
        }

        .matrix-select:hover {
            border-color: #93c5fd;
        }

        .result-box {
            background: #eff6ff;
            border: 2px solid #bfdbfe;
            border-radius: 8px;
            padding: 20px;
            margin-top: 16px;
            line-height: 1.8;
            color: #1e40af;
            display: none;
        }

        .result-box.show {
            display: block;
        }

        .char-count {
            text-align: right;
            font-size: 12px;
            color: #9ca3af;
            margin-top: 8px;
        }

        .error-box {
            background: #fef2f2;
            border: 2px solid #fecaca;
            border-radius: 8px;
            padding: 12px;
            color: #dc2626;
            margin-top: 16px;
            display: none;
        }

        .error-box.show {
            display: block;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e5e7eb;
            border-top-color: #2563eb;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            color: #9ca3af;
            font-size: 14px;
        }

        @media (max-width: 600px) {
            .matrix-row {
                flex-direction: column;
                align-items: stretch;
                gap: 6px;
            }
            .matrix-label {
                width: 100%;
            }
            .header h1 {
                font-size: 1.5rem;
            }
            body {
                padding: 20px 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>KACHIKAN</h1>
            <p class="subtitle">‰æ°ÂÄ§Ë¶≥Ë®∫Êñ≠ AIË¶ÅÁ¥Ñ„ÉÜ„Çπ„Éà</p>
            <p class="description">9„Å§„ÅÆ‰æ°ÂÄ§Ë¶≥„Éû„Éà„É™„ÇØ„Çπ„Åã„ÇâÁ∑èÂêà„Éó„É≠„Éï„Ç°„Ç§„É´„ÇíÁîüÊàê</p>
        </div>

        <!-- Ë®∫Êñ≠ÁµêÊûúÈÅ∏Êäû -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                    </svg>
                </div>
                <div class="card-title blue">Ë®∫Êñ≠ÁµêÊûú„ÇíÈÅ∏Êäû</div>
            </div>

            <div class="button-group">
                <button class="btn btn-purple" onclick="setSampleA()">üöÄ „Çµ„É≥„Éó„É´AÔºà„É™„Éº„ÉÄ„ÉºÂûãÔºâ</button>
                <button class="btn btn-green" onclick="setSampleB()">üíö „Çµ„É≥„Éó„É´BÔºà„Çµ„Éù„Éº„ÉàÂûãÔºâ</button>
                <button class="btn btn-gray" onclick="setRandom()">üé≤ „É©„É≥„ÉÄ„É†</button>
            </div>

            <div id="matrixSelectors"></div>
        </div>

        <!-- ÁîüÊàê„Éú„Çø„É≥ -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon blue">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                </div>
                <div class="card-title blue">„Éó„É≠„Éï„Ç°„Ç§„É´ÁîüÊàê</div>
            </div>

            <button class="btn btn-generate" id="generateBtn" onclick="generateProfile()">
                ‚ú® AI „ÅßÁîüÊàê
            </button>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>ÁîüÊàê‰∏≠...</p>
            </div>

            <div class="error-box" id="errorBox"></div>

            <div class="result-box" id="resultBox"></div>
            <div class="char-count" id="charCount"></div>
        </div>

        <div class="footer">
            <p>¬© 2024 KACHIKAN. All rights reserved.</p>
        </div>
    </div>

    <script>
        // „Éû„Éà„É™„ÇØ„Çπ„Å®„Çø„Ç§„Éó„ÅÆÂÆöÁæ©
        const MATRICES = [
            { name: "Âêë„ÅçÂêà„ÅÑÊñπ„Å®Èñ¢„Çè„ÇäÊñπ", types: ["ÂÖàÂ∞éÂûã„ÉÅ„É£„É¨„É≥„Ç∏„É£„Éº", "„Åó„Å™„ÇÑ„Åã„Å™Êé®ÈÄ≤ËÄÖ", "Â†ÖÂÆüÂûã„É™„Éº„ÉÄ„Éº", "ÊüîËªü„Å™„ÉÅ„É£„É¨„É≥„Ç∏„É£„Éº", "„Éê„É©„É≥„ÇπÂûã„Ç¢„Ç∏„É£„Çπ„Çø„Éº", "Â†ÖÂÆü„Å™Ë™øÊï¥ËÄÖ", "ÊüîËªüÂûã„ÉÅ„É£„É¨„É≥„Ç∏„É£„Éº", "ÂÖ±ÊÑüÁöÑ„Å™ÊîØ„ÅàÊâã", "ÊîØÊè¥Âûã„Çπ„Çø„Éì„É©„Ç§„Ç∂„Éº"] },
            { name: "Áô∫ÊÉ≥„Å®ÈÄ≤„ÇÅÊñπ", types: ["ÊßãÈÄ†ÁöÑ„Ç§„Éé„Éô„Éº„Çø„Éº", "ÊßãÈÄ†Âåñ„Åï„Çå„ÅüÊüîËªüÊ¥æ", "‰øùÂÆàÁöÑ„Ç®„É≥„Ç∏„Éã„Ç¢", "Á©è„ÇÑ„Åã„Å™„Ç¢„Ç§„Éá„Ç¢ÊèêÊ°àËÄÖ", "„Éê„É©„É≥„ÇπÂûã„Éï„É¨„Éº„É†„ÉØ„Éº„Ç´„Éº", "ÂÆâÂÆöÂøóÂêë„ÅÆÂÆüË∑µËÄÖ", "Ëá™Áî±Â•îÊîæ„ÇØ„É™„Ç®„Ç§„Çø„Éº", "„Åó„Å™„ÇÑ„Åã„Å™Êû†Ë∂Ö„ÅàÊÄùËÄÉËÄÖ", "ÊüîËªüÂûã„Éà„É©„Éá„Ç£„Ç∑„Éß„Éä„É™„Çπ„Éà"] },
            { name: "Ë¶ã„ÅõÊñπ„Å®‰∏≠Ë∫´", types: ["„Çπ„Éà„Ç§„ÉÉ„ÇØ„Éë„Éï„Ç©„Éº„Éû„Éº", "‰ø°È†º„Åï„Çå„ÇãÂÆâÂÆöÊ¥æ", "ÈÅìÁæ©ÁöÑ„ÇØ„É©„Éï„Çø„Éº", "ÁõÆÁöÑÊÑèË≠ò„ÅÆ„ÅÇ„ÇãÂÆüË°åËÄÖ", "Ë™øÂíå„ÇíÈáç„Çì„Åò„ÇãÁèæÂÆüÊ¥æ", "‰∏ÅÂØß„Å™„ÇØ„É©„Éï„Çø„Éº", "ÊàêÊûú„Ç¢„Éî„Éº„É´„Éó„É¨„Ç§„É§„Éº", "È≠Ö„ÅõÊñπ„Å´Èï∑„Åë„ÅüÊüîËªüÊ¥æ", "ÂÖ±ÊÑüÈáçË¶ñ„ÅÆÂä™ÂäõÂÆ∂"] },
            { name: "Ëá™Á´ã„Å®ÂçîÂÉç", types: ["„Ç™„Éº„Éä„Éº„Ç∑„ÉÉ„ÉóÂûãÂÆüË°åËÄÖ", "Ëá™Âæã„Åó„ÅüÂÆâÂÆöÂûã", "È†º„Çå„Çã„ÉÅ„Éº„É†„É™„Éº„ÉÄ„Éº", "Áã¨Á´ãÊÄß„ÅÇ„ÇãË™øÊï¥ËÄÖ", "ÊüîËªü„Å´Èñ¢„Çè„ÇãË™øÊï¥Âûã", "ÂçîÂÉç„ÇíÊ¥ª„Åã„ÅôÂÆâÂÆöÊ¥æ", "Áã¨Á´ãÂûã„Ç≥„É©„Éú„É¨„Éº„Çø„Éº", "ÂçîË™øÊÄß„ÅÇ„ÇãÊüîËªüÊ¥æ", "ÂÖ±ÂâµÂûã„Çµ„Éù„Éº„Çø„Éº"] },
            { name: "ÁµÑÁπî„Å®„ÅÆÈñ¢„Çè„ÇäÊñπ", types: ["ÂÖ¨ÊòéÊ≠£Â§ß„Å™ÂçîË™øËÄÖ", "ÂÜ∑Èùô„Å™Ë™øÊï¥ÂΩπ", "Ëá™ÂæãÁöÑ„Ç∏„É£„Çπ„ÉÜ„Ç£„Çπ„Éó„É¨„Ç§„É§„Éº", "„Å§„Å™„Åå„Çä„ÇíÂ∞ä„Å∂Ë™øÊï¥ËÄÖ", "Ë™øÂíåÂøóÂêë„ÅÆÊüîËªüÊ¥æ", "Ëá™Á´ã„Åó„ÅüÂçîË™øËÄÖ", "ÂÖ±ÊÑüÁöÑ„ÉÅ„Éº„É†„Éó„É¨„Ç§„É§„Éº", "ÊÄù„ÅÑ„ÇÑ„Çä„ÅÇ„Çã„Éê„É©„É≥„Çµ„Éº", "ÁπäÁ¥∞„Å™Áã¨Á´ã„ÉØ„Éº„Ç´„Éº"] },
            { name: "„Çπ„Éî„Éº„Éâ„Å®Ë£ÅÈáè", types: ["Âç≥Êñ≠Âç≥Ê±∫„Éï„Ç°„Ç§„Çø„Éº", "ÊüîËªü„Å´Âãï„Åë„ÇãÂÆüÂãôÊ¥æ", "Á∑ªÂØÜ„Å™„ÇØ„É©„Éï„Éà„Éû„Çπ„Çø„Éº", "„Çπ„Éî„Éº„ÉâÈáçË¶ñ„ÅÆË™øÊï¥ÂΩπ", "Áä∂Ê≥ÅÂØæÂøúÂûã„Ç™„Éö„É¨„Éº„Çø„Éº", "Á¢∫ÂÆüÊÄß„ÇíÈáç„Çì„Åò„ÇãÊîØÊè¥ËÄÖ", "„Çπ„Éî„Éº„ÉâÂÆüË°å„Éï„Ç©„É≠„ÉØ„Éº", "ÂÆâÂÆöÂøóÂêë„ÅÆ„Éï„Ç©„É≠„ÉØ„Éº", "Âá†Â∏≥Èù¢„Å™‰ªïÁµÑ„ÅøÂÆüË°åËÄÖ"] },
            { name: "Âà§Êñ≠„ÅÆËª∏„Å®Ë¶ñÁÇπ", types: ["ÂêàÁêÜÁöÑ„Éû„Éº„Ç±„ÉÉ„ÉàÂøóÂêë", "Ë´ñÁêÜÁöÑ„Å™Ë™øÊï¥Âûã", "„É≠„Ç∏„Ç´„É´„Éó„É©„É≥„Éä„Éº", "ÂØæË©±„ÇíÂ§ßÂàá„Å´„Åô„ÇãÁèæÂ†¥ÊÑüË¶öÊ¥æ", "Ë¶ñÂ∫ßÊüîËªüÂûã„Éê„É©„É≥„Çµ„Éº", "ÂÖ®‰ΩìÊúÄÈÅ©„ÇíËÄÉ„Åà„ÇãÂÆâÂÆöÂûã", "ÂÖ±ÊÑüÂûã„Çµ„Éº„Éì„Çπ„Éû„Ç§„É≥„Éâ", "ÂÖ±ÊÑüÂäõ„ÅÇ„ÇãÊüîËªüÊ¥æ", "‰∫∫ÈñìÈñ¢‰øÇÈáçË¶ñ„ÅÆÁµÑÁπî‰∫∫"] },
            { name: "ÁõÆÁöÑ„Å®Ë¶ãËøî„Çä", types: ["ÊàêÊûúÈÇÑÂÖÉÂûã„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´", "ÊàêÊûúÈáçË¶ñ„ÅÆÁèæÂÆüÊ¥æ", "ÊàêÊûúÂøóÂêë„ÅÆ„Çª„É´„Éï„Éó„É¨„Ç§„É§„Éº", "‰ªñËÄÖÂøóÂêë„ÅÆ„Éê„É©„É≥„ÇπÂûã", "ÂãïÊ©ü„ÅÆÂ§öÊßòÊÄß„ÇíÂèó„ÅëÂÖ•„Çå„ÇãÊüîËªüÂûã", "Ëá™ÂæãÂøóÂêë„ÅÆÊüîËªüÊ¥æ", "ÁêÜÊÉ≥ÈßÜÂãïÂûã„Éü„ÉÉ„Ç∑„Éß„É≥„ÉØ„Éº„Ç´„Éº", "„ÇÑ„Çä„Åå„ÅÑÈáçË¶ñ„ÅÆÊüîËªüÊ¥æ", "‰ø°ÂøµËøΩÊ±ÇÂûã„ÇØ„É™„Ç®„Ç§„Çø„Éº"] },
            { name: "Ë°®Áèæ„Å®‰ºù„ÅàÊñπ", types: ["Ë™øÂíåÂûã„Çµ„Éù„Éº„Çø„Éº", "Ê∞ó„Å•„Åã„ÅÑ‰∏äÊâã„Å™ÊüîËªüÊ¥æ", "ÂÖ±ÊÑüÁöÑ„Ç≥„Éü„É•„Éã„Ç±„Éº„Çø„Éº", "Êéß„Åà„ÇÅ„ÅßË™øÂíåÁöÑ„Å™ÂÆüÂãôÊ¥æ", "Ë™øÂíåÁöÑ„É°„ÉÉ„Çª„É≥„Ç∏„É£„Éº", "Ëá™ÂàÜ„Çâ„Åó„Åï„ÇíÊ¥ª„Åã„ÅôÊüîËªüÊ¥æ", "ÊÖéÈáç„Å™ÁêÜÊÄßÊ¥æ„Éñ„É¨„Ç§„É≥", "Ë´ñÁêÜ„Å®ÂÖ±ÊÑü„ÅÆ„Éê„É©„É≥„Çµ„Éº", "Ëá™‰ø°„ÅÇ„ÇãË´ñÁêÜÊ¥æ„Éó„ÉÉ„Ç∑„É•Âûã"] }
        ];

        // ÂàùÊúüÂåñÔºö„Çª„É¨„ÇØ„Éà„Éú„ÉÉ„ÇØ„Çπ„ÇíÁîüÊàê
        function init() {
            const container = document.getElementById('matrixSelectors');
            MATRICES.forEach((matrix, i) => {
                const row = document.createElement('div');
                row.className = 'matrix-row';
                
                const label = document.createElement('span');
                label.className = 'matrix-label';
                label.textContent = matrix.name;
                
                const select = document.createElement('select');
                select.className = 'matrix-select';
                select.id = `matrix${i}`;
                
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = 'ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
                select.appendChild(defaultOption);
                
                matrix.types.forEach(type => {
                    const option = document.createElement('option');
                    option.value = type;
                    option.textContent = type;
                    select.appendChild(option);
                });
                
                row.appendChild(label);
                row.appendChild(select);
                container.appendChild(row);
            });
        }

        // „Çµ„É≥„Éó„É´AÔºö„É™„Éº„ÉÄ„ÉºÂûã
        function setSampleA() {
            const values = [
                "ÂÖàÂ∞éÂûã„ÉÅ„É£„É¨„É≥„Ç∏„É£„Éº",
                "Ëá™Áî±Â•îÊîæ„ÇØ„É™„Ç®„Ç§„Çø„Éº",
                "„Çπ„Éà„Ç§„ÉÉ„ÇØ„Éë„Éï„Ç©„Éº„Éû„Éº",
                "„Ç™„Éº„Éä„Éº„Ç∑„ÉÉ„ÉóÂûãÂÆüË°åËÄÖ",
                "Ëá™ÂæãÁöÑ„Ç∏„É£„Çπ„ÉÜ„Ç£„Çπ„Éó„É¨„Ç§„É§„Éº",
                "Âç≥Êñ≠Âç≥Ê±∫„Éï„Ç°„Ç§„Çø„Éº",
                "ÂêàÁêÜÁöÑ„Éû„Éº„Ç±„ÉÉ„ÉàÂøóÂêë",
                "ÊàêÊûúÈÇÑÂÖÉÂûã„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´",
                "Ëá™‰ø°„ÅÇ„ÇãË´ñÁêÜÊ¥æ„Éó„ÉÉ„Ç∑„É•Âûã"
            ];
            setSelections(values);
        }

        // „Çµ„É≥„Éó„É´BÔºö„Çµ„Éù„Éº„ÉàÂûã
        function setSampleB() {
            const values = [
                "ÂÖ±ÊÑüÁöÑ„Å™ÊîØ„ÅàÊâã",
                "Á©è„ÇÑ„Åã„Å™„Ç¢„Ç§„Éá„Ç¢ÊèêÊ°àËÄÖ",
                "‰∏ÅÂØß„Å™„ÇØ„É©„Éï„Çø„Éº",
                "ÂÖ±ÂâµÂûã„Çµ„Éù„Éº„Çø„Éº",
                "ÂÖ±ÊÑüÁöÑ„ÉÅ„Éº„É†„Éó„É¨„Ç§„É§„Éº",
                "Á¢∫ÂÆüÊÄß„ÇíÈáç„Çì„Åò„ÇãÊîØÊè¥ËÄÖ",
                "ÂÖ±ÊÑüÂûã„Çµ„Éº„Éì„Çπ„Éû„Ç§„É≥„Éâ",
                "ÁêÜÊÉ≥ÈßÜÂãïÂûã„Éü„ÉÉ„Ç∑„Éß„É≥„ÉØ„Éº„Ç´„Éº",
                "Ë™øÂíåÂûã„Çµ„Éù„Éº„Çø„Éº"
            ];
            setSelections(values);
        }

        // „É©„É≥„ÉÄ„É†ÈÅ∏Êäû
        function setRandom() {
            const values = MATRICES.map(m => m.types[Math.floor(Math.random() * m.types.length)]);
            setSelections(values);
        }

        // ÈÅ∏ÊäûÂÄ§„Çí„Çª„ÉÉ„Éà
        function setSelections(values) {
            values.forEach((val, i) => {
                document.getElementById(`matrix${i}`).value = val;
            });
        }

        // ÈÅ∏ÊäûÂÄ§„ÇíÂèñÂæó
        function getSelections() {
            return MATRICES.map((_, i) => document.getElementById(`matrix${i}`).value);
        }

        // „Éó„É≠„Éï„Ç°„Ç§„É´ÁîüÊàê
        async function generateProfile() {
            const selections = getSelections();
            
            // „Éê„É™„Éá„Éº„Ç∑„Éß„É≥
            if (selections.some(s => !s)) {
                showError('ÂÖ®„Å¶„ÅÆÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            // UIÊõ¥Êñ∞
            hideError();
            hideResult();
            showLoading();
            document.getElementById('generateBtn').disabled = true;
            
            // Ë®∫Êñ≠„Éá„Éº„Çø„ÇíÊßãÁØâ
            const diagnosis = selections.map((type, i) => ({
                matrix: MATRICES[i].name,
                type: type
            }));
            
            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ diagnosis })
                });
                
                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }
                
                showResult(data.profile);
                
            } catch (error) {
                showError(error.message);
            } finally {
                hideLoading();
                document.getElementById('generateBtn').disabled = false;
            }
        }

        // UI „Éò„É´„Éë„ÉºÈñ¢Êï∞
        function showError(message) {
            const box = document.getElementById('errorBox');
            box.textContent = '‚ö†Ô∏è ' + message;
            box.classList.add('show');
        }

        function hideError() {
            document.getElementById('errorBox').classList.remove('show');
        }

        function showResult(text) {
            const box = document.getElementById('resultBox');
            box.textContent = text;
            box.classList.add('show');
            document.getElementById('charCount').textContent = `${text.length}ÊñáÂ≠ó`;
        }

        function hideResult() {
            document.getElementById('resultBox').classList.remove('show');
            document.getElementById('charCount').textContent = '';
        }

        function showLoading() {
            document.getElementById('loading').classList.add('show');
        }

        function hideLoading() {
            document.getElementById('loading').classList.remove('show');
        }

        // ÂàùÊúüÂåñÂÆüË°å
        init();
    </script>
</body>
</html>
